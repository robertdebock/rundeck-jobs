- description: Install a package.
  executionEnabled: true
  loglevel: INFO
  name: Install package
  nodefilters:
    dispatch:
      excludePrecedence: true
      keepgoing: true
      rankOrder: ascending
      threadcount: 1
    filter: .*
  nodesSelectedByDefault: true
  options:
  - description: The name of the package
    name: package
    required: true
  scheduleEnabled: true
  sequence:
    commands:
    - script: |
        #!/bin/bash

        if [ -x /usr/bin/yum ] ; then
         rpm -q $RD_OPTION_PACKAGE > /dev/null 2>&1
         if [ $? =  0 ] ; then
           echo "Package $RD_OPTION_PACKAGE is already installed."
         else
           yum -y install $RD_OPTION_PACKAGE
         fi
        elif [ -x /usr/bin/apt-get ] ; then
         dpkg -l $RD_OPTION_PACKAGE > /dev/null 2>&1
         if [ $? =  0 ] ; then
           echo "Package $RD_OPTION_PACKAGE is already installed."
         else
           apt-get install $RD_OPTION_PACKAGE
         fi
        fi
    keepgoing: true
    strategy: node-first
